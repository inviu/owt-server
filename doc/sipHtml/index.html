<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Intel&reg; Collaboration Suite for WebRTC: Gateway for SIP User Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="intel_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Intel&reg; Collaboration Suite for WebRTC
   &#160;<span id="projectnumber">version&nbsp;3.3</span>
   </div>
   <div id="projectbrief">Intel&reg; Collaboration Suite for WebRTC (Intel&reg; CS for WebRTC) SIP Gateway Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Gateway for SIP User Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="SIPsection1"></a>
1 Overview</h1>
<h2><a class="anchor" id="SIPsection1_1"></a>
1.1 Introduction</h2>
<p>Welcome to the user guide for the Intel<sup>®</sup> Collaboration Suite for WebRTC (Intel<sup>®</sup> CS for WebRTC) Gateway for SIP. The gateway enables the WebRTC interoperability with traditional RTC systems. This guide describes how to install and launch the gateway server for Session Initiation Protocol (SIP), and it provides details of the interfaces available in the gateway SDK for SIP. This guide includes these sections:</p>
<ul>
<li>Section 1. Introduction and conventions used in this guide.</li>
<li>Section 2. Installing, launching, and stopping the Intel CS for WebRTC Gateway Server.</li>
<li>Section 3. Interfaces provided with the Intel CS for WebRTC Gateway SDK for SIP.</li>
</ul>
<h2><a class="anchor" id="SIPsection1_2"></a>
1.2 Terminology</h2>
<p>This manual uses the following acronyms and terms: </p><table class="doxtable">
<tr>
<th>Abbreviation </th><th>Full Name  </th></tr>
<tr>
<td>ADT </td><td>Android Developer Toolkit </td></tr>
<tr>
<td>API </td><td>Application programming interface </td></tr>
<tr>
<td>IDE </td><td>Integrated development environment </td></tr>
<tr>
<td>JS </td><td>JavaScript programming language </td></tr>
<tr>
<td>MCU </td><td>Multipoint control unit </td></tr>
<tr>
<td>MSML </td><td>Media server markup language </td></tr>
<tr>
<td>P2P </td><td>Peer-to-peer </td></tr>
<tr>
<td>QoS </td><td>Quality of service </td></tr>
<tr>
<td>ReST </td><td>Representational state transfer </td></tr>
<tr>
<td>RTC </td><td>Real-time communication </td></tr>
<tr>
<td>RTCP </td><td>RTP Control Protocol </td></tr>
<tr>
<td>RTP </td><td>Real Time Transport Protocol </td></tr>
<tr>
<td>SDK　</td><td>Software development kit </td></tr>
<tr>
<td>SDP </td><td>Session Description Protocol </td></tr>
<tr>
<td>SIP </td><td>Session Initiation Protocol </td></tr>
<tr>
<td>XMPP </td><td>Extensible Messaging and Presence Protocol </td></tr>
<tr>
<td>WebRTC </td><td>Web real-time communication </td></tr>
</table>
<h2><a class="anchor" id="SIPsection1_3"></a>
1.3 For more information</h2>
<p>For more information, visit the following Web pages:</p>
<ul>
<li>Intel HTML Developer Zone: <a href="https://software.intel.com/en-us/html5/tools">https://software.intel.com/en-us/html5/tools</a></li>
<li>Intel Collaboration Suite for WebRTC:<ol type="1">
<li><a href="https://software.intel.com/webrtc">https://software.intel.com/webrtc</a></li>
<li><a href="https://software.intel.com/en-us/forums/webrtc">https://software.intel.com/en-us/forums/webrtc</a></li>
<li><a href="https://software.intel.com/zh-cn/forums/webrtc">https://software.intel.com/zh-cn/forums/webrtc</a></li>
</ol>
</li>
<li>The Internet Engineering Task Force (IETF<sup>®</sup>) Working Group: <a href="http://tools.ietf.org/wg/rtcweb/">http://tools.ietf.org/wg/rtcweb/</a></li>
<li>W3C WebRTC Working Group: <a href="http://www.w3.org/2011/04/webrtc/">http://www.w3.org/2011/04/webrtc/</a></li>
<li>WebRTC Open Project: <a href="http://www.webrtc.org">http://www.webrtc.org</a></li>
</ul>
<h1><a class="anchor" id="SIPsection2"></a>
2 Gateway Installation for SIP</h1>
<h2><a class="anchor" id="SIPsection2_1"></a>
2.1 Introduction</h2>
<p>This section briefly lists the requirements, test environment, and dependencies for the gateway. This section then briefly explains how to configure, install, launch, and stop the gateway. </p>
<h2><a class="anchor" id="SIPsection2_2"></a>
2.2 Requirements and test environment</h2>
<p>Table 2-1 describes the system requirements for installing the Intel CS for WebRTC Gateway for SIP.</p>
<p><b>Table 2-1. Server requirements</b> </p><table class="doxtable">
<tr>
<th>Application name </th><th>OS version  </th></tr>
<tr>
<td>Gateway Server </td><td>CentOS* 7.2 </td></tr>
</table>
<p>Install the OpenH264 library to support H.264 in the gateway for SIP when required, refer to the <a href="#SIPsection2_2_1">Install the Cisco OpenH264 Library</a> section for more details.</p>
<blockquote class="doxtable">
<p><b>Note</b>: The OpenH264 library is not required for GPU-accelerated Gateway. </p>
</blockquote>
<p>If you want to set up gateway service powered by GPU-accelerated Gateway server, the following server side SDK needs to be installed on CentOS* 7.2:</p>
<ul>
<li>Intel<sup>®</sup> Media Server Studio for Linux* version 2015 R6</li>
</ul>
<p>Either Professional Edition or Community Edition is applicable. For download or installation instructions, please visit its website at <a href="https://software.intel.com/en-us/intel-media-server-studio">https://software.intel.com/en-us/intel-media-server-studio</a>.</p>
<p>The gateway for SIP has been tested in the environment listed in Table 2-2.</p>
<p> 
<table class="doxtable">
<caption><b>Table 2-2. Test environment</b></caption>
<tbody>
<tr>
<th>Environment</th>
<th>Consists of</th>
</tr>
<tr>
<td>SIP server</td>
<td>Kamailio v4.1.3*</td>
</tr>
<tr>
<td>SIP client</td>
<td><ul>
<li>Jitsi v2.8* or later</li></td>
</tr>
<tr>
<td>Video codec</td>
<td>
VP8: <ul><li>Jitsi v2.8 or later</li></ul><br>
H264:
<ul>
<li>Jitsi v2.8 or later</li></ul>
</td>
</tr>
<tr>
<td>Audio codec</td>
<td><ul><li>G.711*</li>
<li>G.722*</li>
<li>Opus</li></ul></td>
</tr>
<tr>
<td>Web browser</td>
<td><ul><li>Google Chrome* v55</li>
<li>Firefox* v50</li></ul>
</td>
</tr>
</tbody>
</table>
</p>
<h3><a class="anchor" id="SIPsection2_2_1"></a>
2.2.1 Install the Cisco OpenH264 Library</h3>
<p>The default H.264 library does not provide any media logic. To enable H.264 support in non GPU-accelerated gateway system, you must install the Cisco OpenH264 library.</p>
<p>Follow these steps to install the library:</p>
<ol type="1">
<li>Go to the following URL and get the binary package: <a href="http://ciscobinary.openh264.org/libopenh264-1.4.0-linux64.so.bz2">http://ciscobinary.openh264.org/libopenh264-1.4.0-linux64.so.bz2</a>. <pre class="fragment">curl –O http://ciscobinary.openh264.org/libopenh264-1.4.0-linux64.so.bz2
</pre></li>
<li>Unzip this package with following command: <pre class="fragment">bzip2 -d libopenh264-1.4.0-linux64.so.bz2
</pre></li>
<li>Copy the lib file libopenh264-1.4.0-linux64.so to Release-&lt;Version&gt;/lib folder, and rename it to libopenh264.so.0 to replace the existing pseudo one.</li>
</ol>
<h2><a class="anchor" id="SIPsection2_3"></a>
2.3 Configure the gateway machine</h2>
<p>To optimize the gateway server for best performance, we strongly recommend that you configure the system as shown in these simple steps:</p>
<ol type="1">
<li><p class="startli">Add or update the following lines in /etc/security/limits.conf, in order to set the maximum numbers of open files, running processes and maximum stack size to a large enough number: </p><pre class="fragment"> * hard nproc unlimited
 * soft nproc unlimited
 * hard nofile 163840
 * soft nofile 163840
 * hard stack 1024
 * soft stack 1024
</pre><p class="startli">If you only want to target these setting to specific user or group rather than all with "*", please follow the configuration rules of the /etc/security/limits.conf file.</p>
</li>
<li><p class="startli">Make sure pam_limits.so appears in /etc/pam.d/login as following: </p><pre class="fragment"> session required pam_limits.so
</pre><p class="startli">So that the updated limits.conf takes effect after your next login.</p>
</li>
<li>If you run gateway on CentOS, add or update the following two lines in /etc/security/limits.d/xx-nproc.conf as well: <pre class="fragment"> * soft nproc unlimited
 * hard nproc unlimited
</pre></li>
<li>Add or update the following lines in /etc/sysctl.conf: <pre class="fragment"> fs.file-max=200000
 net.core.rmem_max=16777216
 net.core.wmem_max=16777216
 net.core.rmem_default=16777216
 net.core.wmem_default=16777216
 net.ipv4.udp_mem = 4096 87380 16777216
</pre></li>
<li>Now run command /sbin/sysctl -p to activate the new configuration, or just restart your gateway machine.</li>
<li>You can run command "ulimit -a" to make sure the new setting in limits.conf is correct as you set.</li>
</ol>
<h2><a class="anchor" id="SIPsection2_4"></a>
2.4 Install the gateway package</h2>
<p>To install gateway server, do as following: </p><pre class="fragment">    tar xf CS_WebRTC_Gateway_SIP.&lt;Version&gt;.tgz
    cd Release-&lt;Version&gt;/
</pre><h2><a class="anchor" id="SIPsection2_5"></a>
2.5 Launch the gateway server</h2>
<p>You can launch the gateway by itself, or you can launch the gateway and the sample Web application together. To launch both the gateway and the sample web application, use the start-all command as shown here: </p><pre class="fragment">    bin/start-all.sh
</pre><p>To launch only the gateway, use this command: </p><pre class="fragment">    bin/daemon.sh start gateway
</pre><p>To launch GPU-accelerated gateway, you need first change the value of "hardwareAccelerated" in etc/gateway_config.json as below, and run start-all.sh. </p><pre class="fragment">    "hardwareAccelerated": true
</pre><p>You can then access the sample application by launching your browser with URL: <a href="http://XXXXX:3001">http://XXXXX:3001</a> or <a href="https://XXXXX:3004">https://XXXXX:3004</a>. Replace "XXXXX" with the IP address or machine name of the server on which Gateway and the sample application run.</p>
<p><b>Note</b>: Latest Chrome browser versions from v47 force https access on WebRTC applications. You will got SSL warning page with default certificates, replace them with your own trusted ones.</p>
<h2><a class="anchor" id="SIPsection2_6"></a>
2.6 Stop the gateway server</h2>
<p>Run the following commands to stop the gateway: </p><pre class="fragment">    bin/stop-all.sh
</pre><p>or stop it alone: </p><pre class="fragment">    bin/daemon.sh stop gateway</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Mar 2 2020 15:59:37 for Intel&reg; Collaboration Suite for WebRTC version&nbsp;3.3</li>
  </ul>
</div>
</body>
<script type="text/javascript">
/*  // configure analytics
  var wapLocalCode = 'us-en'; // dynamically set per localized site
  // load analytics
  (function(){
    var host = (window.document.location.protocol == 'http:')?"http://www.intel.com":"https://www-ssl.intel.com";
    var url = host + "/content/dam/www/global/wap/wap-ssg-intel.js"; // wap file url
    var po = document.createElement('script');
    po.type = 'text/javascript';
    po.async = true;
    po.src = url;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();*/
</script>
</html>
